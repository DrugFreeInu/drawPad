<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DrawPad â€” Live</title>
<style>
  html, body {
    margin:0;
    height:100%;
    width:100%;
    overflow:hidden;
    background:#000;
    font-family:system-ui;
  }

  canvas {
    display:block;
    width:100%;
    height:100%;
    touch-action:none;
  }

  /* Code panel overlay */
  #codePanel {
    position:fixed;
    top:0;
    right:0;
    width:100%;
    height:100%;
    background:rgba(0,0,0,0.95);
    color:#8fbfff;
    font-family:monospace;
    font-size:14px;
    padding:20px;
    overflow:auto;
    opacity:0;
    pointer-events:none;
    transition:opacity 0.25s ease;
    box-sizing:border-box;
    white-space:pre-wrap;
  }

  #toggleCode {
    position:fixed;
    top:20px;
    right:20px;
    z-index:9999;
    padding:10px 14px;
    border-radius:20px;
    background:rgba(18,30,60,0.36);
    color:#8fbfff;
    font-weight:700;
    cursor:pointer;
    border:none;
  }
</style>
</head>
<body>

<canvas id="draw"></canvas>
<div id="codePanel"></div>
<button id="toggleCode">Show Code</button>

<script>
const canvas = document.getElementById('draw');
const ctx = canvas.getContext('2d');
const codePanel = document.getElementById('codePanel');
const toggleBtn = document.getElementById('toggleCode');

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

// draw faint grid
const step = 50;
ctx.strokeStyle = 'rgba(143,191,255,0.08)';
ctx.lineWidth = 1;
for(let x=0; x<canvas.width; x+=step){
  ctx.beginPath();
  ctx.moveTo(x,0);
  ctx.lineTo(x,canvas.height);
  ctx.stroke();
}
for(let y=0; y<canvas.height; y+=step){
  ctx.beginPath();
  ctx.moveTo(0,y);
  ctx.lineTo(canvas.width,y);
  ctx.stroke();
}

// free-hand drawing
let drawing = false;
const points = []; // store all points for code generation

function drawPoint(x,y){
  ctx.fillStyle='#8fbfff';
  ctx.beginPath();
  ctx.arc(x,y,4,0,Math.PI*2);
  ctx.fill();
  points.push([x,y]);
  updateCode();
}

// mouse events
canvas.addEventListener('mousedown', e=>drawing=true);
canvas.addEventListener('mouseup', e=>drawing=false);
canvas.addEventListener('mousemove', e=>{
  if(!drawing) return;
  drawPoint(e.clientX,e.clientY);
});

// touch events
canvas.addEventListener('touchstart', e=>{
  e.preventDefault();
  drawing=true;
  const t=e.touches[0];
  drawPoint(t.clientX,t.clientY);
});
canvas.addEventListener('touchend', e=>{
  e.preventDefault();
  drawing=false;
});
canvas.addEventListener('touchmove', e=>{
  e.preventDefault();
  if(!drawing) return;
  const t=e.touches[0];
  drawPoint(t.clientX,t.clientY);
});

// resize canvas
window.addEventListener('resize', ()=>{
  const imgData = ctx.getImageData(0,0,canvas.width,canvas.height);
  canvas.width=window.innerWidth;
  canvas.height=window.innerHeight;
  ctx.putImageData(imgData,0,0);
});

// toggle code panel
let visible=false;
toggleBtn.addEventListener('click', ()=>{
  visible=!visible;
  codePanel.style.opacity=visible?1:0;
  codePanel.style.pointerEvents=visible? 'auto':'none';
  toggleBtn.textContent=visible?'Hide Code':'Show Code';
});

// generate minimal code
function updateCode(){
  let code = '';
  points.forEach(p=>{
    code += `ctx.fillRect(${p[0]},${p[1]},4,4);\n`;
  });
  codePanel.textContent = code;
}

// anti-cookie enforcement
Object.defineProperty(document,'cookie',{get:()=>"",set:()=>{console.warn("Cookies blocked");}});
</script>

</body>
</html>
