<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>DrawPad â€” Live</title>

<!-- Strict CSP to block cookies, network, and external scripts -->
<meta http-equiv="Content-Security-Policy"
      content="
        default-src 'self';
        script-src 'self';
        style-src 'self' 'unsafe-inline';
        img-src 'self' data:;
        connect-src 'none';
        frame-ancestors 'none';
        object-src 'none';
        form-action 'none';
        base-uri 'self';
      ">

<style>
  html, body {
    height: 100%;
    width: 100%;
    margin: 0;
    background: #000;
    overflow: hidden;
  }

  iframe.layer {
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    border: 0;
    pointer-events: auto;
    opacity: 1;
    transition: opacity .45s ease, z-index .2s;
  }

  /* hide code layer initially */
  iframe#layer-code { display: none; }
</style>
</head>
<body>

<!-- DrawPad layer -->
<iframe id="layer-drawpad" class="layer" data-src="drawpad.html" title="Drawpad"></iframe>

<!-- Code export layer (hidden) -->
<iframe id="layer-code" class="layer" data-src="code.html" title="Code Export"></iframe>

<script>
  // Anti-cookie enforcement
  Object.defineProperty(document, 'cookie', {
    get: () => "",
    set: () => { console.warn("Cookies blocked"); }
  });

  // Auto-cache both layers
  (function(){
    const timestamp = Date.now();
    document.querySelectorAll('iframe.layer').forEach(f => {
      const src = f.dataset.src || '';
      if(!src.includes('://')) f.src = src + '?v=' + timestamp;
    });

    // Auto-cache self
    if(location.search.indexOf('v=') === -1){
      history.replaceState(null, '', location.pathname + '?v=' + timestamp);
    }
  })();
</script>

</body>
</html>
